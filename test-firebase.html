<!DOCTYPE html>
<html>
<head>
    <title>Test Firebase Connection</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <h1>Firebase Connection Test</h1>
    <div id="status">Testing...</div>
    <button onclick="testWrite()">Test Write to Firebase</button>
    <button onclick="testRead()">Test Read from Firebase</button>
    <div id="result"></div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        const status = document.getElementById('status');
        const result = document.getElementById('result');
        
        try {
            const db = firebase.database();
            
            db.ref('.info/connected').on('value', (snap) => {
                if (snap.val() === true) {
                    status.innerHTML = '<h2 style="color: green;">✓ Firebase Connected!</h2>';
                } else {
                    status.innerHTML = '<h2 style="color: red;">✗ Firebase Not Connected</h2>';
                }
            });
        } catch (error) {
            status.innerHTML = '<h2 style="color: red;">Error: ' + error.message + '</h2>';
        }
        
        function testWrite() {
            firebase.database().ref('test').set({
                message: 'Hello from Vermont!',
                time: new Date().toISOString()
            }).then(() => {
                result.innerHTML = '<p style="color: green;">Write successful!</p>';
            }).catch((error) => {
                result.innerHTML = '<p style="color: red;">Write failed: ' + error.message + '</p>';
            });
        }
        
        function testRead() {
            firebase.database().ref('test').once('value').then((snapshot) => {
                const data = snapshot.val();
                result.innerHTML = '<p>Read data: ' + JSON.stringify(data) + '</p>';
            }).catch((error) => {
                result.innerHTML = '<p style="color: red;">Read failed: ' + error.message + '</p>';
            });
        }
    </script>
</body>
</html>